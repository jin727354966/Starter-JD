<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/register.css">
    <script src="./js/main.js" type="module" index="reg" id="currentpage"></script>
</head>
<body>
    <div id="head" class="container">
        <div class="registerlogo">
            <a href="//www.jd.com/" clstag="pageclick|keycount|20150112ABD|45">
                <img src="//misc.360buyimg.com/lib/img/e/logo-201305-b.png" alt="" >
            </a>
        </div>
                <a href="//surveys.jd.com/index.php?r=survey/index/sid/568245/lang/zh-Hans" class="qus" target="_blank"><b></b>注册页面，调查问卷</a>
    </div>
    <!-- 提示 -->
    <div id="hint">
        <div class="container">
            <p><i></i>依据《网络安全法》，为保障您的账户安全和正常使用，请尽快完成手机号验证！ 新版<a href="#">《京东隐私政策》</a>已上线，将更有利于保护您的个人隐私。</p>
        </div>
    </div>
    <!-- 注册 -->
    <div id="enroll">
        <div class="enrollwrap container">
            <div class="formwrap">
                <p class="title">账号注册</p>
                <form action="http://localhost/Starter-JD/php/subreg.php" method="POST">
                    <p class="errormsg">我错我错了我错了我错了我错了我错了我错了我错了我错了我错了了</p>
                    <p class="item userp">
                        <label for=""></label>
                        <input type="text" placeholder="请输入用户名" name="username">
                        <i></i>
                    </p>
                    <p class="item pass">
                        <label for=""></label>
                        <input type="text" placeholder="请输入密码" name="password">
                        <i></i>
                    </p>
                    <p class="item pass">
                        <label for=""></label>
                        <input type="text" placeholder="再次输入密码" name="repass">
                        <i></i>
                    </p>
                    <p class="item">
                        <label for="">TEL</label>
                        <input type="text" placeholder="请输入电话号码" name="tell">
                        <i></i>
                    </p>
                    <p class="forget"><input type="checkbox"> 履行</p>
                    <p class="cdown"><input type="submit" value="注册"></p>
                </form>
            </div>
        </div>
    </div>
    <!-- <script src="./js/pajax.js"></script> -->
    <script>
        // import {pajax} from './js/pajax.js';//导入pajax的函数
        
// class Enroll{//注册的类  登入的类
//     constructor(option){//option是一个对象类型，存入要炒作的元素
//         this.type=option.type;//type属性用于存储是注册还是登入  reg===注册 log===登入
//         this.username=option.username;// 用户名
//         this.password=option.password;//密码
//         this.repass=option.repass;//再次输入密码
//         this.tel=option.tel;//手机号
//         this.sub=option.sub;//提交按钮
//         this.errormsg=option.errormsg;//错误提示
//         this.checkbox=option.checkbox;//盒子选择
//         this.error={};//用于防止错误提示的对象
//     }
//     init(){//初始函数
//         this.sub.disabled=true;
//         this.sub.className="disable";//提交按钮一开始是不可点击且是灰色的
//         if(this.type==='reg'){//表示是注册
//             this.username.addEventListener("blur",(e)=>{//用户名
//                 var e=e||window.event;
//                 this.userhandler(e);
//                 this.subHandler();
//             });
//             this.password.addEventListener("blur",(e)=>{//密码验证
//                 var e=e||window.event;
//                 this.verify(e);
//                 this.subHandler();
//             });
//             this.repass.addEventListener("blur",(e)=>{//再次密码验证
//                 var e=e||window.event;
//                 this.verify(e);
//                 this.subHandler();
//             });
//             this.tel.addEventListener("blur",(e)=>{//手机验证
//                 var e=e||window.event;
//                 this.verify(e);
//                 this.subHandler();
//             });
//             this.checkbox.addEventListener("click",(e)=>{
//                 this.subHandler();
//             });
//             this.sub.addEventListener("click",(e)=>{
//                 this.subclickHandler(e);
//             });

//         }else if(this.type==='log'){//表示登入

//         }
//     }
//     /* 提交表单 */
//     subclickHandler(e){
//         if(e.currentTarget.disabled) return;
//     }
//     /* 提交表单是否可以点击，每个文件失去焦点都要判断一次 */
//     subHandler(){
//     /* 判断所以表单是否为空，判断checkbox是否选中,错误对象是否为空  都对的话，改变确定按钮的类 ,并且发送ajax*/
//         if(this.repass){//如果确认密码存在，还要判断确认密码和电话号码 checkbox是否选中
//             if(this.repass.value.trim() && this.tel.value.trim() &&  this.checkbox.checked && this.username.value.trim() && this.password.value.trim()  && JSON.stringify(this.error) === "{}"){//注册
//                 this.sub.className="";
//                 this.sub.disabled=false;
//             }else{
//                 this.sub.disabled=true;
//                 this.sub.className="disable";
//             }
//         }else{//登入
//             if(this.username.value.trim() && this.password.value.trim()  && JSON.stringify(this.error) === "{}"){//登入
//                 this.sub.className="";
//                 this.sub.disabled=false;
//             }else{
//                 this.sub.disabled=true;
//                 this.sub.className="disable";
//             }
//         }
//     }
//     /* 用户名验证 */
//     userhandler(e){
        
//         let userreg=/^[a-zA-Z]{1}\w{5,17}$/;//用户名6到18位  需要字母开头
//         console.log(userreg.test(this.username.value.trim()));
        
//         if(userreg.test(this.username.value.trim())){//如果符合正则，则发送ajax请求
//             //判断是登入还是注册
//             if(this.type==='reg'){//注册
//                 //判断用户名是否被注册
//                 pajax({
//                     type:"post",
//                     url:"http://localhost/Starter-JD/php/register.php",
//                     data:{
//                         username:this.username.value.trim()
//                     }
//                 }).then((res)=>{//this指向实例对象
//                     if(res!=="1"){//已被注册
//                         this.errorshow("user",res);
//                     }
//                 }).catch(()=>{//用户名可以用  先删除对象的user属性，清空页面错误信息，判断对象是否是空对象，是空对象就隐藏，不是就重新遍历显示新内容
//                     this.errorshow("user");//调用显示方法
//                 })
//             }else{//登入

//             }
//         }else{//正则不符合规则
//             this.errorshow("user","用户名不符合规则");//调用显示方法
//         }
//     }
//     verify(e){//验证
//         switch(e.currentTarget){
//             case this.password: //密码  
//             let passreg=/^[a-zA-Z0-9]{8,16}$/;//用户名8到16位
//             if(!passreg.test(this.password.value.trim())){//如果不符合正则，则显示错误
//                 this.errorshow("password","密码不符合规则");//调用显示方法
//             }else{
//                 this.errorshow("password");//调用显示方法
//             }
//             break;
//             case this.repass: //再次输入密码
//             if(this.password.value.trim()){//密码不为空
//                 if( this.repass.value.trim() !== this.password.value.trim()){
//                     this.errorshow("repass","密码不相同");//调用显示方法
//                 }else{
//                     this.errorshow("repass");//调用显示方法
//                 }
//             }
//             break;
//             case this.tel: //电话
//             let tellreg=/^1\d{10}$/;//用户名8到16位
//             if(!tellreg.test(this.tel.value.trim())){//如果不符合正则，则显示错误
//                 this.errorshow("tell","电话不符合规则");//调用显示方法
//             }else{
//                 this.errorshow("tell");//调用显示方法
//             }
//             break;
//         }
//     }
//     /* 验证 true表示要修改  attr是修改的属性  value是要修改的属性值 */
//     errorshow(attr,value){//为ture 表示是错误的，要加属性，或者修改属性
//         if(value) this.error[attr]=value;
//         else delete this.error[attr];
//         this.errormsg.textContent="";
//         if(JSON.stringify(this.error) === "{}"){//看是否是空对象
//                 this.errormsg.style.display="none"; 
//             }else{
//             this.errormsg.style.display="block"; 
//             let num = 0;
//             for(let prop in this.error){
//                 num++;
//                 if(num===1)  this.errormsg.textContent+=this.error[prop];
//                 else this.errormsg.textContent+=";"+this.error[prop];
           
//             }
//         } 
//     }
// }
    




    // reginit();
    // function reginit(){
    //     new Enroll({
    //         type:"reg",
    //         username:document.querySelector("input[name='username']"),
    //         password:document.querySelector("input[name='password']"),
    //         repass:document.querySelector("input[name='repass']"),
    //         tel:document.querySelector("input[name='tell']"),
    //         sub:document.querySelector("input[type='submit']"),//提交按钮
    //         checkbox:document.querySelector("input[type='checkbox']"),//履行诺言
    //         errormsg:document.querySelector(".errormsg")//提交按钮
    //     }).init();
    // }
    
    </script>
</body>
</html>